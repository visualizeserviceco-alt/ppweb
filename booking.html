<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  <meta name="format-detection" content="telephone=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Book Your Session with Paps Production</title>
  <meta name="description" content="Book your session with Paps Production. Capture your project professionally and creatively.">
  <link rel="icon" type="image/svg+xml" href="Storage/Logo.svg">
  <link rel="stylesheet" href="Styles/Style.css">
  <link rel="stylesheet" href="Styles/booking.css">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

  <div id="header-include"></div>

  <main id="main-content" tabindex="-1">
    <section class="booking-hero fadeInUp" aria-label="Book a Session">
      <div class="booking-hero-content">
        <h1>Book Your Session with Paps Production</h1>
        <p>Let's bring your creative vision to life — professionally and precisely.</p>
        <button type="button" class="book-now-btn" onclick="openComingSoonPopup()">Book Now</button>
      </div>
    </section>

    <section class="booking-info-section fadeInLeft" aria-label="What to Expect">
      <img src="Storage/Photos/IMG2.JPG" alt="Booking consultation" class="booking-info-img" loading="lazy">
      <div class="booking-info-text">
        <h2>What to Expect</h2>
        <p><strong>Every session starts with collaboration.</strong> I'll discuss your goals, location, and vision to make sure your shoot fits your brand or personal style.</p>
        <p><em>From sleek automotive photography to detailed portraits, Paps Production ensures every project is handled with creativity, precision, and professionalism.</em></p>
      </div>
    </section>

    <!-- Pricing and Booking Section -->
    <section class="pricing-booking-section fadeInUp" aria-label="Pricing and Booking">
      <div class="pricing-title-wrapper">
        <h2 class="pricing-title">Pricing</h2>
      </div>
      <div class="pricing-grid">
        <div class="pricing-card">
          <h3 class="pricing-card-title">1 Hour Photo Session</h3>
          <div class="pricing-card-badge">MOST POPULAR</div>
          <ul class="pricing-card-list">
            <li class="feature-item"><i data-lucide="car" class="feature-icon"></i> Multiple cars welcome</li>
            <li class="feature-item"><i data-lucide="map-pin" class="feature-icon"></i> 1–2 premium locations</li>
            <li class="feature-item"><i data-lucide="zap" class="feature-icon"></i> 48-hour delivery</li>
            <li class="pricing-card-price">$50</li>
          </ul>
        </div>
        <div class="pricing-card">
          <h3 class="pricing-card-title">2 Hour Photo Session</h3>
          <ul class="pricing-card-list">
            <li class="feature-item"><i data-lucide="car" class="feature-icon"></i> Multiple cars welcome</li>
            <li class="feature-item"><i data-lucide="map-pin" class="feature-icon"></i> 2–3 premium locations</li>
            <li class="feature-item"><i data-lucide="zap" class="feature-icon"></i> 60-hour delivery</li>
            <li class="pricing-card-price">$80</li>
          </ul>
        </div>
        <div class="pricing-card">
          <h3 class="pricing-card-title">30 Min Roller Session</h3>
          <ul class="pricing-card-list">
            <li class="feature-item"><i data-lucide="car" class="feature-icon"></i> 1–2 cars</li>
            <li class="feature-item"><i data-lucide="video" class="feature-icon"></i> Multiple clips and one edit</li>
            <li class="feature-item"><i data-lucide="zap" class="feature-icon"></i> 48-hour delivery</li>
            <li class="pricing-card-price">$45</li>
          </ul>
        </div>
        <div class="pricing-card">
          <h3 class="pricing-card-title">1 Hour Roller Session</h3>
          <ul class="pricing-card-list">
            <li class="feature-item"><i data-lucide="car" class="feature-icon"></i> Multiple cars</li>
            <li class="feature-item"><i data-lucide="video" class="feature-icon"></i> Many clips and multiple edits</li>
            <li class="feature-item"><i data-lucide="zap" class="feature-icon"></i> 72-hour delivery</li>
            <li class="pricing-card-price">$90</li>
          </ul>
        </div>
      </div>
      <div class="pricing-note">
        <em>(All pricing and results can vary depending on your project's goals and settings. Please keep this in mind and ask as many questions during our meeting to move forward with your project!)</em>
      </div>
    </section>

    <section class="booking-form-section fadeInRight" id="booking-form-section" aria-label="Booking Form">
      <h2>Book Your Session</h2>
      <p>I'm working on exciting improvements to make your booking experience even better! My new booking system will be available soon.</p>
      <div class="booking-form-button-wrapper">
        <button type="button" class="btn book-now-btn" onclick="openComingSoonPopup()">Book Now</button>
      </div>
      <p class="booking-terms-note">By booking, you agree to my <a href="terms.html" class="terms-link">Terms & Conditions</a>.</p>
    </section>

    <section class="booking-support fadeInUp" aria-label="Contact & Support">
      <h3>Need help before booking?</h3>
      <p>Just message me on <a href="https://www.instagram.com/paps_productions/" target="_blank" rel="noopener">Instagram</a>.</p>
    </section>
  </main>

  <div id="footer-include"></div>

  <script src="Java/main.js"></script>
  <script>
    // Wait for DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Dynamically load the header
      fetch('Backend/header.html')
        .then(res => res.text())
        .then(html => {
          document.getElementById('header-include').innerHTML = html;
          
          // Initialize Lucide icons first
          if (typeof lucide !== 'undefined') {
            lucide.createIcons();
          }
          
          // Small delay to ensure icons are rendered before initializing menu
          setTimeout(() => {
            // Initialize mobile menu functionality with new system
            if (window.MobileMenuManager) {
              window.MobileMenuManager.init();
            } else if (window.initMobileMenu) {
              window.initMobileMenu();
            }
          }, 100);
          
          // Set active state for current page
          const bookingLink = document.querySelector('a[href="booking.html"]');
          if (bookingLink && !bookingLink.classList.contains('active')) {
            bookingLink.classList.add('active');
            bookingLink.setAttribute('aria-current', 'page');
          }
        });
    });

    // Dynamically load the footer
    fetch('Backend/footer.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('footer-include').innerHTML = html;
        
        // Initialize Lucide icons in footer
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      });

    // Intersection Observer for fade-in animations
    function animateOnScroll() {
      const observer = new window.IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animated');
            obs.unobserve(entry.target);
          }
        });
      }, { threshold: 0.15 });
      document.querySelectorAll('.fadeInUp, .fadeInLeft, .fadeInRight').forEach(el => {
        observer.observe(el);
      });
    }
    if ('IntersectionObserver' in window) animateOnScroll();
    else {
      // Fallback: show all
      document.querySelectorAll('.fadeInUp, .fadeInLeft, .fadeInRight').forEach(el => el.classList.add('animated'));
    }

    // Parallax effect for hero
    window.addEventListener('scroll', function() {
      const hero = document.querySelector('.booking-hero');
      if (!hero) return;
      let scrollY = window.scrollY;
      hero.style.backgroundPosition = `center ${Math.round(scrollY * 0.18)}px`;
    });

    // Booking popup functionality (now opens the Typeform in a modal iframe)
    // Clicking any existing button that calls openComingSoonPopup() will open the Typeform.
    const TYPEFORM_URL = 'https://form.typeform.com/to/BumCiBtG';

    function openComingSoonPopup() {
      const popup = document.getElementById('comingSoonPopup');
      if (!popup) return;

      // Lazy-create iframe if needed
      let iframe = popup.querySelector('iframe');
      if (!iframe) {
        iframe = document.createElement('iframe');
        iframe.setAttribute('title', 'Booking form');
        iframe.setAttribute('frameborder', '0');
        iframe.setAttribute('allow', 'camera; microphone; autoplay; encrypted-media');
        iframe.style.width = '100%';
        iframe.style.height = '80vh';
        iframe.style.border = '0';
        // Append before the buttons container if present
        const target = popup.querySelector('.popup-iframe-wrap') || popup.querySelector('.popup-content');
        target.appendChild(iframe);
      }

      // Set src to load the form (do this here so it's lazy-loaded)
      if (!iframe.src) iframe.src = TYPEFORM_URL;

      popup.style.display = 'flex';

      // Prevent body scroll while modal is open
      document.body.style.position = 'fixed';
      document.body.style.width = '100%';
      document.body.style.overflow = 'hidden';
      document.body.style.top = `-${window.scrollY}px`;
      document.body.classList.add('popup-open');

      // Reinitialize icons (close button) after showing popup
      if (typeof lucide !== 'undefined') {
        setTimeout(() => lucide.createIcons(), 50);
      }
    }

    function closeComingSoonPopup() {
      const popup = document.getElementById('comingSoonPopup');
      if (!popup) return;

      popup.style.display = 'none';

      // Stop the iframe to free resources
      const iframe = popup.querySelector('iframe');
      if (iframe) {
        try { iframe.src = 'about:blank'; } catch (e) { /* ignore */ }
        iframe.remove();
      }

      // Restore body scroll
      const scrollY = document.body.style.top;
      document.body.style.position = '';
      document.body.style.width = '';
      document.body.style.overflow = '';
      document.body.style.top = '';
      document.body.classList.remove('popup-open');

      // Restore scroll position
      if (scrollY) {
        window.scrollTo(0, parseInt(scrollY || '0') * -1);
      }
    }

    // Close popup when clicking outside
    window.addEventListener('click', function(event) {
      const popup = document.getElementById('comingSoonPopup');
      if (popup && event.target === popup) {
        closeComingSoonPopup();
      }
    });

    // Close popup on escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        const popup = document.getElementById('comingSoonPopup');
        if (popup && popup.style.display === 'flex') {
          closeComingSoonPopup();
        }
      }
    });
  </script>

  <!-- Booking popup (Typeform iframe, lazy-loaded by JS) -->
  <div id="comingSoonPopup" class="popup-overlay" aria-hidden="true" role="dialog" aria-label="Booking form popup">
    <div class="popup-content">
      <button type="button" class="popup-close" onclick="closeComingSoonPopup()" aria-label="Close popup">&times;</button>
      <div class="popup-iframe-wrap">
        <p class="popup-loading-text">Loading booking form…</p>
      </div>
      <div class="popup-fallback">
        <p>If the form doesn't load, you can open it in a new tab:</p>
        <a href="https://form.typeform.com/to/BumCiBtG" target="_blank" rel="noopener" class="popup-btn primary">Open booking form</a>
      </div>
    </div>
  </div>

</body>
</html>